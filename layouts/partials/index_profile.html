<div class="profile">
    <div class="profile_inner">
        {{- if site.Params.profileMode.imageUrl -}}
            {{- $img := "" }}
            {{- if not (urls.Parse site.Params.profileMode.imageUrl).IsAbs }}
                {{- $img = resources.Get site.Params.profileMode.imageUrl }}
            {{- end }}
            {{- if $img }}
                {{- $processableFormats := (slice "jpg" "jpeg" "png" "tif" "bmp" "gif") -}}
                {{- if hugo.IsExtended -}}
                    {{- $processableFormats = $processableFormats | append "webp" -}}
                {{- end -}}
                {{- $prod := (hugo.IsProduction | or (eq site.Params.env "production")) }}
                {{- if and (in $processableFormats $img.MediaType.SubType) (eq $prod true)}}
                    {{- if site.Params.profileMode.imageWidth }}
                        {{- $img = $img.Resize (printf "%vx" site.Params.profileMode.imageWidth) }}
                    {{- else if site.Params.profileMode.imageHeight }}
                        {{- $img = $img.Resize (printf "x%v" site.Params.profileMode.imageHeight) }}
                    {{- else }}
                        {{- $img = $img.Resize "150x150" }}
                    {{- end }}
                {{- end }}
                <img draggable="false" src="{{ $img.Permalink }}" alt="{{ site.Params.profileMode.imageTitle | default "profile image" }}" title="{{ site.Params.profileMode.imageTitle }}"
                    height="{{ site.Params.profileMode.imageHeight | default 150 }}"
                    width="{{ site.Params.profileMode.imageWidth | default 150 }}" />
            {{- else }}
            <img draggable="false" src="{{ site.Params.profileMode.imageUrl | absURL }}" alt="{{ site.Params.profileMode.imageTitle | default "profile image" }}" title="{{ site.Params.profileMode.imageTitle }}"
                height="{{ site.Params.profileMode.imageHeight | default 150 }}"
                width="{{ site.Params.profileMode.imageWidth | default 150 }}" />
            {{- end }}
        {{- end }}
        <h1>{{ .title | default site.Title | markdownify }}</h1>
        <span>{{ .subtitle | markdownify }}</span>
        {{- partial "social_icons.html" . -}}

        {{- with .buttons }}
        <style>
            .grid-buttons {
                display: grid;
                grid-template-columns: repeat(2, 1fr);
                gap: 16px;
                width: 100%;
                max-width: 700px;
                margin: 0 auto;
            }
            @media (max-width: 768px) {
                .grid-buttons {
                    grid-template-columns: 1fr;
                }
            }
        </style>
        <div class="buttons grid-buttons">
            {{- range . }}
            <a class="button" href="{{ trim .url " " }}" rel="noopener" title="{{ .name }}">
                <span class="button-inner">
                    {{- if .icon }}
                    <img src="{{ .icon | relURL }}" alt="Logo" style="width: 20px; height: 20px; margin-right: 8px; vertical-align: middle;">
                    {{- end }}
                    
                    {{ .name }}
                    
                    {{- if (findRE "://" .url) }}&nbsp;
                    <svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round"
                        stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="14" width="14">
                        <path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"></path>
                        <path d="M15 3h6v6"></path>
                        <path d="M10 14L21 3"></path>
                    </svg>
                    {{- end }}
                </span>
            </a>
            {{- end }}
        </div>
        {{- end }}
    </div>
</div>
